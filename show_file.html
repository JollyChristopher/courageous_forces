<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Courageous Forces Character Sheet</title>
  <meta name="description" content="The Courageous Character Sheet">
  <meta name="author" content="Halemaster">

  <script type="text/javascript" src="https://app.roll20.net/v2/js/jquery-1.9.1.js"></script>
  <link rel="stylesheet" href="https://app.roll20.net/assets/base.css">
  <link rel="stylesheet" href="https://app.roll20.net/assets/app.css">
</head>

<body class="no-touch" style="cursor: auto;">
  <div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable" tabindex="-1" role="dialog" aria-labelledby="ui-id-10" style="outline: 0px; z-index: 10508; position: absolute; height: 680.8px; width: 941.8px; top: 30px; left: 506px; display: block;">
    <div class="dialog characterdialog ui-dialog-content ui-widget-content" style="display: block; width: 902px; min-height: 0px; height: 614px;" scolltop="0" scrollleft="0">
      <div class="dialog largedialog characterviewer" style="display: block;">
        <div class="tab-content">
          <form autocomplete="off" class="sheetform" _lpchecked="1">
            <div id="content" class="charactersheet tab-pane charsheet lang-en" style="display: block;"></div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script type="text/javascript">
    function sheetifyClasses() {
      $("#content").find("*").each(function (index, element) {
        let classes = [];
        element.classList.forEach(function (c) {
          classes.push(c);
        });
        classes.forEach(function (c) {
          element.classList.remove(c);
          element.classList.add('sheet-' + c);
        });
      });
    }

    $.ajax({
      url: 'courageous_forces.css',
      success: function(data) {
        data = data.replaceAll(/.*{/ig, function(match) {
          if(match === '.charsheet {') return match;
          return '.charsheet ' + match;
        });
        console.log(data);
        let sheet = document.createElement('style');
        sheet.innerHTML = data;
        document.head.appendChild(sheet);
      }
    });

    $("#content").load("courageous_forces.html", function() {
      sheetifyClasses();
      $("button").each(function (index, element) {
        $(this).addClass('btn');
        $(this).addClass('ui-draggable');
      });
    });
  </script>
</body>
</html>